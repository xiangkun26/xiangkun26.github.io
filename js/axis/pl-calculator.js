function semiHightChart(e,t){Highcharts.chart("semiChart",{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},title:{text:"",align:"center",verticalAlign:"middle",y:40},tooltip:{pointFormat:""},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-50,style:{fontWeight:"bold",color:"white"}},startAngle:-90,endAngle:90,center:["50%","120%"],size:"220%"}},series:[{type:"pie",name:"",innerSize:"70%",data:[["",e],["",t]]}]})}function MobTable(){$(".monthlyCal").hide(),$(".show1").show(),$("#contentSelect").on("change",function(){$(".monthlyCal").hide(),$(".show"+$(this).val()).show()})}function updateRangeSlider(){$(".inpt").each(function(){$(this).on("change",function(){valuetoassign=(valuetoassignComa=$(this).val()).replace(/[,]/g,""),slidertochange=$(this).parents(".inpt-statement").siblings(".irs-hidden-input").prop("id"),(slidertoupdate=$("#"+slidertochange).data("ionRangeSlider")).update({from:parseInt(valuetoassign)})})})}function calculatorRangeSlider(e,t,l,n,r,s,o,d,c){var p=e;p.ionRangeSlider({type:"single",min:t,max:l,from:n,step:r,grid:s,prettify_enabled:!0,prettify:function(e){return!0==o?e:!0==d?e+="%":rangenumDifferentiation(e)},onStart:function(e){"intrRateSlider"==c?p.parent(".inpt-slider").find(".inpt").val(numberFormatter(e.from)+"%"):p.parent(".inpt-slider").find(".inpt").val(numberFormatter(e.from))},onFinish:function(e){p.parent(".inpt-slider").find(".inpt").trigger("blur"),calEMIval(),Amortization()}}),p.on("change",function(){var e=$(this),t=e.prop("value");"intrRateSlider"==e.prop("id")?e.parent(".inpt-slider").find(".inpt").val(numberFormatter(t)+"%"):(e.parent(".inpt-slider").find(".inpt").val(numberFormatter(t)),"tensureSlider"==e.prop("id")&&Amortization()),$(this).parents(".inpt-slider").find(".clssErrorMsg").css("visibility","hidden"),$(this).parents(".inpt-slider").find(".inputBox").removeClass("errorBorder")})}function numberFormatter(e){e=e.toString();var t="";e.indexOf(".")>0&&(t=e.substring(e.indexOf("."),e.length));var l=(e=(e=Math.floor(e)).toString()).substring(e.length-3),n=e.substring(0,e.length-3);return""!=n&&(l=","+l),n.replace(/\B(?=(\d{2})+(?!\d))/g,",")+l+t}function rangenumDifferentiation(e){var t=["K","L","Cr"];return e>=1e7?(e/=1e7).toFixed(0)+""+t[2]:e>=1e5?(e/=1e5).toFixed(0)+""+t[1]:(e<1e5?(e/=1e3,e=e.toFixed(0)+""+t[0]):e=0,e)}function calValidation(){$(".numbersOnly").keypress(function(e){var t=$(this).parent().find(".error_message");if(8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return t.html("Number only."),t.css("display","block"),!1;t.html(""),t.css("display","none")}),$(".inputBox input").keyup(function(e){13==e.which&&$(this).blur();var t=$(this).val().replace(/[,]/g,"");t>=$(this).data("minval")&&t<=$(this).data("maxval")?($(this).parents(".inpt-statement").find(".clssErrorMsg").css("visibility","hidden"),$(this).parent().removeClass("errorBorder")):($(this).parents(".inpt-statement").find(".clssErrorMsg").css("visibility","visible"),$(this).parent().addClass("errorBorder"))}),$(".numbersDecimal").on("input",function(e){var t=$(this);t.val(t.val().replace(/[^0-9\.]/g,"")),(46!=e.which||-1!=t.val().indexOf("."))&&(e.which<48||e.which>57)&&e.preventDefault()})}$(document).ready(function(){calValidation(),$('input[name="slider"]').length&&(calculatorRangeSlider($("#loanAmtSlider"),5e4,4e6,5e4,1e3,!0,!1,!1,"loanAmtSlider"),calculatorRangeSlider($("#tensureSlider"),12,84,12,1,!0,!0,!1,"tensureSlider"),calculatorRangeSlider($("#intrRateSlider"),11,22,11,.5,!0,!1,!0,"intrRateSlider")),updateRangeSlider(),$(".inpt").each(function(){$(this).on("focus",function(){$(this).val($(this).val().replace(/[,]/g,"")),".inpt-slider".find(".inpt").val(numberFormatter(data.from)+"%")}),calEMIval()}),$(document).on("blur change",".txtBox",function(){validateNetWeight($(this))}),Amortization()});var flag=!1;function validateNetWeight(e){return""==e.val()||0==e.val()?(e.parents(".inputBox").addClass("errorBr"),flag=!1):(e.parents(".inputBox").removeClass("errorBr"),flag=!0),flag}function calEMIval(){var e=$("#loan_amount").val().replace(/,/g,""),t=$("#tenure").val(),l=$("#interest_rate").val().replace("%",""),n=calculate_emi(e,l,t,"0");console.log(n.emi),$("#lblEMIAmt").text(dispNum(n.emi)),$("#lblEMIAmtHd").text(n.emi.toFixed(2)),$("#princAmt").text($("#loan_amount").val()),$("#totalPayAmt").text(dispNum(n.emi*t)),$("#intrAmt").text(dispNum(n.emi*t-e));var r=(n.emi*t-e)*100/e;semiHightChart(100-r,r)}function Amortization(){var e=$("#loan_amount").val().replace(/,/g,""),t=e,l=0,n=0,r=0,s="",o="";parseInt($("#tenure").val());var d=$(".js-hamburger").attr("data-type");switch($("#trDynamic").empty(),$("#trDynamicMob").empty(),d){case"hindi":$("#trDynamic").append('<div class="tableRow tableHead"><div class="tableCell wid20">à¤®à¤¹à¥€à¤¨à¤¾</div><div class="tableCell wid16">à¤“à¤ªà¤¨à¤¿à¤‚à¤— à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸</div><div class="tableCell wid16">à¤®à¤¹à¥€à¤¨à¤¾ à¤•à¥‡ à¤¦à¥Œà¤°à¤¾à¤¨ à¤¬à¥à¤¯à¤¾à¤œ à¤•à¤¾ à¤­à¥à¤—à¤¤à¤¾à¤¨</div><div class="tableCell wid16">à¤®à¤¹à¥€à¤¨à¤¾ à¤•à¥‡ à¤¦à¥Œà¤°à¤¾à¤¨ à¤ªà¥à¤°à¤¿à¤‚à¤¸à¤¿à¤ªà¤² à¤•à¤¾ à¤šà¥à¤•à¤¾à¤¯à¤¾</div><div class="tableCell wid16">à¤•à¥à¤²à¥‹à¤œà¤¿à¤‚à¤— à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸</div></div>');break;case"tamil":break;default:$("#trDynamic").append('<div class="tableRow tableHead"><div class="tableCell wid20">Month</div><div class="tableCell wid16">Opening Balance</div><div class="tableCell wid16">Interest paid during the month</div><div class="tableCell wid16">Principal repaid during the month</div><div class="tableCell wid16">Closing Balance</div></div>')}var c="";for(i=1;i<=$("#tenure").val();i++)c+="<option value='"+i+"'>"+i+"</option>";switch(d){case"hindi":$("#trDynamicMob").append('<div class="mobRow mobTableHead"><div class="mobTableCell">à¤®à¤¹à¥€à¤¨à¤¾</div><div class="mobTableCell text-right"><select class="selDrop" id="contentSelect">'+c+'</select><img src="/images/default-source/revamp_new/loans/desktop/down-select.png"></div></div>');break;case"tamil":break;default:$("#trDynamicMob").append('<div class="mobRow mobTableHead"><div class="mobTableCell">Month</div><div class="mobTableCell text-right"><select class="selDrop" id="contentSelect">'+c+'</select><img src="/images/default-source/revamp_new/loans/desktop/down-select.png"></div></div>')}for(k=1;k<=parseInt($("#tenure").val());k++){var p=0;for(i=1,sumprncRepaid=0;i<=1;i++){var m=$("#interest_rate").val().replace("%",""),v=$("#lblEMIAmtHd").text().replace(",","");p+=l=e*m/12/100,sumprncRepaid+=n=v-l,e=r=e-n}switch(s+='<div class="tableRow totalCalc" ><div class="tableCell">'+k+'</div><div class="tableCell"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(t)+'</div><div class="tableCell"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(p)+'</div><div class="tableCell"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(sumprncRepaid)+'</div><div class="tableCell"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(r)+" </div></div>",d){case"hindi":o+='<div class="monthlyCal show'+k+'" ><div class="mobRow"><div class="mobTableCell">à¤“à¤ªà¤¨à¤¿à¤‚à¤— à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(t)+'</div></div><div class="mobRow"><div class="mobTableCell">à¤®à¤¹à¥€à¤¨à¤¾ à¤•à¥‡ à¤¦à¥Œà¤°à¤¾à¤¨ à¤¬à¥à¤¯à¤¾à¤œ à¤•à¤¾ à¤­à¥à¤—à¤¤à¤¾à¤¨</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(p)+'</div></div><div class="mobRow"><div class="mobTableCell">à¤®à¤¹à¥€à¤¨à¤¾ à¤•à¥‡ à¤¦à¥Œà¤°à¤¾à¤¨ à¤ªà¥à¤°à¤¿à¤‚à¤¸à¤¿à¤ªà¤² à¤•à¤¾ à¤šà¥à¤•à¤¾à¤¯à¤¾</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(sumprncRepaid)+'</div></div><div class="mobRow"><div class="mobTableCell">à¤•à¥à¤²à¥‹à¤œà¤¿à¤‚à¤— à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(r)+" </div></div></div>";break;case"tamil":break;default:o+='<div class="monthlyCal show'+k+'" ><div class="mobRow"><div class="mobTableCell">Opening Balance</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(t)+'</div></div><div class="mobRow"><div class="mobTableCell">Interest paid during the year</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(p)+'</div></div><div class="mobRow"><div class="mobTableCell">Principal repaid during the year</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(sumprncRepaid)+'</div></div><div class="mobRow"><div class="mobTableCell">Closing Balance</div><div class="mobTableCell text-right"><img src="/images/default-source/revamp_new/loans/desktop/rupee-icon-black.png" class="rupeeIcon-sm">'+dispNum(r)+" </div></div></div>"}t=r}$("#trDynamic").append(s),$("#trDynamicMob").append(o),MobTable()}function dispNum(e){var t=Math.round(e);t+="",x1=(x=t.split("."))[0],x2=x.length>1?"."+x[1]:"";for(var l=/(\d+)(\d{3})/,n=0,r=parseInt(String(x1).length/2-1);l.test(x1)&&(n>0?x1=x1.replace(l,"$1,$2"):(x1=x1.replace(l,"$1,$2"),l=/(\d+)(\d{2})/),n++,0!=--r););return x1+x2}function calculate_emi(e,t,l,n){var r=t/12/100,s={};s.emi=e*r/(1-Math.pow(1/(1+r),l)),s.processingFee=n*e/100,s.totalIntrest=s.emi*l-e,s.totalPayment=s.emi*l,s.quaterAmt=e/4,s.q1=0,s.q2=0,s.q3=0,s.q4=0;var o=s.totalPayment;s.row=[],s.anual=[],s.row[0]={},s.row[0].os=o,s.row[0].pb=e,s.row[0].ip=e*r,s.row[0].pp=s.emi-s.row[0].ip;for(var d=1;o>0;)o-=s.emi,s.row[d]={},s.row[d].os=s.row[d-1].os-s.emi,s.row[d].pb=s.row[d-1].pb-s.emi+s.row[d-1].ip,s.row[d].ip=s.row[d].pb*r,s.row[d].pp=s.emi-s.row[d].ip,0==s.q1&&s.row[d].pb<3*s.quaterAmt&&(s.q1=d),0==s.q2&&s.row[d].pb<2*s.quaterAmt&&(s.q2=d-s.q1),0==s.q3&&s.row[d].pb<s.quaterAmt&&(s.q3=d-s.q2-s.q1),0==s.q4&&s.row[d].pb<0&&(s.q4=d-s.q3-s.q2-s.q1),d+=1;var c=0,p=0;for(r=0;r<s.row.length-1;r++)if(c+=s.row[r].ip,p+=s.row[r].pp,(r+1)%12==0){var m=parseInt(r/12);s.anual[m]={},s.anual[m].ip=c,s.anual[m].pb=s.row[12*m].pb,s.anual[m].pp=p,c=0,p=0}return s}function Getdecimal(e){return a=e.keyCode||e.which,b=$("#interest_rate").val().replace("%",""),!(46===a&&b.indexOf(".")>=0)&&(!(8!=a&&0!=a&&(a<48||a>57))||46==a)&&void 0}function ThousandSeparate(e){var t=(e=e.toString()).substring(e.length-3),l=e.substring(0,e.length-3);return""!=l&&(t=","+t),l.replace(/\B(?=(\d{2})+(?!\d))/g,",")+t}$("#loan_amount").on("change",function(){$("#loan_amount").val()>4e6&&$("#loan_amount").val("40,00,000"),5e4>$("#loan_amount").val()&&$("#loan_amount").val("50,000"),calEMIval(),Amortization()}),$("#interest_rate").on("change",function(){$("#interest_rate").val()>22&&$("#interest_rate").val("22%"),11>$("#interest_rate").val()&&$("#interest_rate").val("11%"),calEMIval(),Amortization()}),$("#tenure").on("change",function(){$("#tenure").val()>84&&$("#tenure").val("84"),12>$("#tenure").val()&&$("#tenure").val("12"),calEMIval(),Amortization()});